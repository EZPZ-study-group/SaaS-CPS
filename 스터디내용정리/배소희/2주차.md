2주차
===
# Spring boot 의 폴더 구조
```
src  
├── main  
│   ├── java  
│   │   └── com  
│   │       └── example  
│   │           ├── controller  (컨트롤러 클래스)  
│   │           ├── model       (엔티티 클래스 등)  
│   │           ├── repository  (JPA Repository 인터페이스)  
│   │           ├── service     (비즈니스 로직 구현)  
│   │           └── Application.java (메인 애플리케이션 클래스)  
│   ├── resources  
│   │   ├── static     (정적 리소스 - CSS, JavaScript 등)  
│   │   ├── templates  (HTML 템플릿)  
│   │   └── application.properties (Spring 설정 파일)  
└── test  
    └── java  
        └── com  
            └── example  
                ├── controller  (테스트용 컨트롤러 클래스)  
                ├── service     (테스트용 서비스 클래스)  
                └── repository  (테스트용 Repository 인터페이스)  
```

JPA 랑 mybatis 를 같이 쓰는건 괜찮지 않을까 

MSA 시스템을 만들거면 그럼 해당 시스템은 어떻게 분리해야되는지 고민 

기능별로 시스템을 분리하는 방식으로 가면 괜찮을거같은 느낌 

## Microservices Architecture vs Monolithic Architecture

레기시 시스템은 monolitihc architecture 구조를 가지고 있음 

MSA의 장점 에는 확장성과 유연성, 독립성, 기술다양성, 빠른 개발과 배포가 있음.  
단점으로는 복잡성, 운영부담, 분산시스템의 어려움이 있음 

Monolithic Archtecture 는 간단한 관리, 초기개발의 용이성, 단일 데이터 베이스가 있음.  
단점으로는 확장이 어려움, 기술스택 제약, 대규모 프로젝트의 복잡성이 있음.

CPS 는 쿠폰포인트 관리 시스템으로 개발 될 예정.   
확장성과 유연함이 필요한가? 독립성이 필요한가? 필요할거 같음.  
현재 시스템들의 사용료 지불방식이 점점 구독료 방식으로 변하고 있음. 빠르게 변하는 IT 시장에 적응하려면 MSA 방식으로 애플리케이션을 개발해야되는게 맞음. 그러나 러닝커브가 높고, 분산시스템의 관리가 어려움. 트랜잭션 관리의 어려움도 생각해야함. 

그러나 어차피 솔루션 개발이 아닌 스터디로 시작하는 것이기 때문에 MSA 방식으로 개발하는 것이 괜찮다고 생각함. 

# 어떤 방식으로 개발방향성을 잡을 것인가 
도메인주도개발(Domain-Driven Design, DDD) 은 복잡한 소프트웨어 시스템을 구축하는데에 중심이 되는 개발방법론임.  
여기서 도메인은 시스템이 해결하려는 문제영역을 가리킨다. 결국에는 말하자면 문제해결이 주가 되는 개발을 해라 라는 뜻이다. 결국에는 업무의 영역을 정확하게 이해하고 개발하라는 뜻임.

# Spring 의 어느 기능을 사용할 것인가 
이제 많고 많은 spring 라이브러리 중에서 어떤 기능을 사용할 것인가 고민해야되는 시간이 왔다. 
MSA 방식의 시스템을 개발 할 것이기 때문에 Spring boot를 일단 기본으로 사용한다. cloud 서버에 올릴거기 때문에 spring cloud 도 사용한다.  
간단한 select, update, insert 쿼리는 작성하기 귀찮으므로 JPA 를 사용한다. 복잡한 join 이 들어갈 경우에는 mybatis 를 사용한다. 근데 여기서 굳이 mybatis 랑 JPA 를 혼합해서 쓸 필요가 있나? 싶기도 하다. 그냥 mybatis 만 쓰면 되는데?  근데 생각해보면 MSA 방식으로 시스템을 개발하려면 JPA 를 사용해서 쉽고 간단하게 개발하고 유지보수 할 수 있게 만들어야 되는거 아닐까 라고 생각을 한다.  
JPA 에 대해서 긍정적인 방향으로 검토해 본다. (그리고 DB 설계에 따라 방향성이 정해질거같음. 제발 조인 많이 안하게 해주세요)


그 다음에는 이제 시스템을 AWS 에 올릴거라는 방향성으로 논의를 했기 때문에 spring cloud 를 사용해야된다고 생각한다. Spring cloud 는 마이크로서비스 환경에서 분산시스템을 쉽게 관리할 수 있는 다양한 기능을 제공한다고 한다. 사용해보지는 않았지만 그렇다고 하니 일단 목록에 포함 시켜둔다. 

잊지 말아야 할 것 중에 하나는 CPS 에서 batch 를 사용할 것이라는 사실이다. 대용량 쿠폰 발급 및 예약 발급등을 위해서는 배치 사용이 필수 인데, 이 때에 필요한 것중에 한개는 Spring Cloud Data Folw 인 거 같다.  

Spring Cloud Data Folw 는 데이터 스트리밍 관리, 배치작업 관리, 이벤트 기반 아키텍처, 시각화 모니터링, 선언적 DSL, 클라우드 환경지원이라는 기능을 가지고 있다. 사실 뭔말인지 정확하게 이해가 안된다. 이건 소스코드를 사용해서 확인해봐야할듯. ( 직접 테스트해보니깐 Spring Cloud Data Flow 는 이미 MSA 방식으로 개발된 시스템들이 있고, 이후에 이걸 묶어주는 역할인듯 )
https://godekdls.github.io/Spring%20Boot/documentation-overview/#31-first-steps  
여기 사이트 좋음

Spring Cloud Config 는 분산시스템에서 각각의 시스템들의 설정을 외부에서 보관할 수 있도록, 서버 사이드와 클라이언트 사이드를 모두 지원함. 컨피그 서버를 둔다고 생각하면 좀 더 이해하기 편함. 

근데 쓰다가 어디까지 썼는지 까먹음 ; 

아 음.. 

다시 생각남 

결론은 먼저 기능 분리 한 다음에 API 시스템들을 조그맣게 만들고 다 만든 다음에 cloud config 기능이든 cloud data flow 를 띄우든 해야 함.. 

해야할 일 
1. REST API 들을 기능별로 묶어서 쪼갤것. 
2. API 들을 만들 것. 
3. 서버에 올릴 것. 
4. 필요한 기능들 즉, 필요한 기능을 가진 서버들을 올릴 것. 

결론 : API 를 개발하면서 뭐가 필요하면 좋겟다 라는 것들을 미리 생각해 놔야 나중에 서버 기능들을 추가할 때 바로바로 적용해보면서 테스트를 할 수 있을 것이다. 

MSA 기반 서비스를 개발 할 때에는 진짜.....기능을 만들고 나서가 문제일듯..


## 요구사항 정리
### 전제조건


### 로그인 


### 쿠폰 발급


### 어드민 페이지(추후업데이트)

### 포인트 발급(추후업데이트)